## Приложение Интернет магазин.

React, RTK query, Typescript, Nest, Postgres(Supabase), hosting (Render.com)

- [x] - Авторизация c помощью JWT пары (access и refresh token)
- [x] - Ротация токенов
- [x] - Отзыв токенов и выход со всех устройств
- [x] - Получение списка категорий товаров
- [x] - Получение списка товаров
- [x] - Постраничная навигация
- [x] - Фильтрация товаров по множеству атрибутам
- [x] - Получение деталей товара
- [x] - Получение и создание отзывов товара

### Клиентское React приложение

- https://shoppirest.onrender.com

### Swagger спецификация API

- https://shoppirest-api.onrender.com/docs

#### Скрипты (package.json)

`nest:dev`- запуск сервера в режиме разработки

`react:dev` - запуск react клиента в режиме разработки

`start:dev` - запуск сервера и react клиента

`nest:build` - сборка сервера

`prisma:gen` - сгенерировать PrismaClient на основе файла schema.prisma.

`prisma:push` - создать таблицы в базе данных на основе файла schema.prisma

`prisma:seed` - заполнить таблицы данными на основе файла seed.ts

#### Переменные окружения

- SUPABASE_URL =""
- SUPABASE_KEY =""
- DATABASE_URL =""
- ACCESS_SECRET =""
- REFRESH_SECRET =""

### Бэкэнд

1. **Общее описание:**

- В качестве бэкенда используется **NestJS**
- Использует **Prisma** как ORM для работы с базой данных **Postgeres** (Supabase)
- Реализует кэширование через `@nestjs/cache-manager`

2. **Основной функционал:**

- Получение списка продуктов (`api/v1/products/search`)
- Получение фасетов (фильтров) для категории (`api/v1/products/facets`)
- Получение детелей продукта по ID (`api/v1/products/{id}`)
- Получение отзывов продукта (`api/v1/reviews`)
- Получение категорий (`api/v1/categories`)

3. **Особенности реализации:**

- Поддержка версионирование API
- Поддерживает фильтрацию по различным атрибутам продуктов
- Работает с JSON-полями в базе данных (поле `properties`)
- Использует сырые SQL-запросы через `prisma.$queryRaw`
- Реализует кэширование для:
  - Атрибутов категорий
  - Числовых опций атрибутов
  - SQL-фильтров

### База данных

![схема](schema.png?raw=true)
